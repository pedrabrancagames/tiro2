<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jogo de Tiro RA</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div id="ui-layer">
    <div id="damage-overlay"></div>
    <!-- HUD durante o jogo -->
    <div id="hud" style="display: none;">
      <div id="score-board">Pontos: <span id="score">0</span></div>
      <div id="timer-board">Tempo: <span id="timer">60</span></div>
    </div>

    <!-- Mira Central -->
    <div id="crosshair"></div>

    <!-- Botão de Tiro (Mantido para mobile/touch) -->
    <button id="shoot-btn" style="display: none;">ATIRAR</button>

    <!-- Tela Inicial -->
    <div id="start-screen" class="screen">
      <h1>Ocean Cleaner RA</h1>
      <p>Limpe o oceano! Acerte os lixos e evite os peixes.</p>
      <button id="start-btn" class="primary-btn">JOGAR</button>
    </div>

    <!-- Tela de Game Over -->
    <div id="game-over-screen" class="screen" style="display: none;">
      <h1>Fim de Jogo!</h1>
      <p>Sua Pontuação: <span id="final-score">0</span></p>
      <p>Melhor Pontuação: <span id="high-score">0</span></p>
      <button id="restart-btn" class="primary-btn">JOGAR NOVAMENTE</button>
    </div>
  </div>

  <a-scene renderer="alpha: true; antialias: true; colorManagement: true;" xr-mode-ui="enabled: false; XRMode: ar;"
    webxr="optionalFeatures: dom-overlay; overlayElement: #ui-layer;" ar-hit-test="target: #reticle; type: map;">
    <!-- Gerenciador do Jogo -->
    <a-entity game-manager></a-entity>

    <!-- Spawner de Inimigos -->
    <a-entity spawner="interval: 2000; range: 5"></a-entity>

    <!-- Câmera com Raycaster para o tiro -->
    <a-entity id="rig">
      <a-camera position="0 1.6 0" look-controls="enabled: false">
        <a-entity id="weapon" weapon raycaster="objects: .trash, .fish; far: 20; showLine: false"
          position="0 0 -0.5"></a-entity>
        <a-cursor visible="false"></a-cursor>
      </a-camera>
    </a-entity>

    <!-- Luzes -->
    <a-light type="ambient" intensity="0.5"></a-light>
    <a-light type="directional" position="1 2 3" intensity="1"></a-light>
  </a-scene>
  <script type="module" src="/main.js"></script>
</body>

</html>